<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <link href="https://unpkg.com/carbon-components/css/carbon-components.min.css" rel="stylesheet"> -->
    <script src="https://unpkg.com/carbon-components/scripts/carbon-components.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/carbon-components-svelte/css/g100.css" />
    <link rel="stylesheet" href="styles/styles.css" />
    <script src="/scripts/backend.js"></script>
    <title>CarboTrack</title>
</head>

<body>

    <section>
        <!-- The top header bar, containing menu items -->
        <header class="bx--header" role="banner" aria-label="IBM CarboTrack" data-header>
            <a class="bx--skip-to-content" href="#main-content" tabindex="0">Skip to main content</a>
            <a href="./">
                <button class="bx--header__menu-trigger bx--header__action" aria-label="Open menu" title="Open menu" data-navigation-menu-panel-label-expand="Open menu" data-navigation-menu-panel-label-collapse="Close menu" data-navigation-menu-target="#navigation-menu-m6ibyfeacg">
                <svg id="icon" xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 32 32">
                    <defs>
                      <style>
                        .cls-1 {
                          fill: none;
                        }
                      </style>
                    </defs>
                    <path d="M29,26H23V22a2.002,2.002,0,0,1,2-2h2V18H23V16h4a2.0023,2.0023,0,0,1,2,2v2a2.0023,2.0023,0,0,1-2,2H25v2h4Z" transform="translate(0 0)"/>
                    <path d="M19,22H15a2.0023,2.0023,0,0,1-2-2V10a2.002,2.002,0,0,1,2-2h4a2.002,2.002,0,0,1,2,2V20A2.0023,2.0023,0,0,1,19,22ZM15,10V20h4V10Z" transform="translate(0 0)"/>
                    <path d="M11,22H5a2.0023,2.0023,0,0,1-2-2V10A2.002,2.002,0,0,1,5,8h6v2H5V20h6Z" transform="translate(0 0)"/>
                    <rect id="_Transparent_Rectangle_" data-name="&lt;Transparent Rectangle&gt;" class="cls-1" width="32" height="32"/>
                  </svg>
            </button>
            </a>
            <a class="bx--header__name" href="javascript:void(0)" title="">
                <span class="bx--header__name--prefix">
        Carbo
      </span>Track
            </a>
            <nav class="bx--header__nav" aria-label="CarboTrack" data-header-nav>
                <ul class="bx--header__menu-bar" aria-label="CarboTrack">
                    <li>
                        <a class="bx--header__menu-item" href="tracker.html" tabindex="0">
            Tracker
          </a>
                    </li>
                    <li>
                        <a class="bx--header__menu-item" href="leaderboard.html" tabindex="0">
            Leaderboard
          </a>
                    </li>
                    <li class="bx--header__submenu" data-header-submenu>
                        <a class="bx--header__menu-item bx--header__menu-title" aria-haspopup="true" aria-expanded="false" href="javascript:void(0)" tabindex="0">
            Account
            <svg class="bx--header__menu-arrow" width="12" height="7" aria-hidden="true">
              <path d="M6.002 5.55L11.27 0l.726.685L6.003 7 0 .685.726 0z" />
            </svg>
          </a>
                        <ul class="bx--header__menu" aria-label="L1 link 3">
                            <li role="none">
                                <a class="bx--header__menu-item" href="javascript:void(0)" tabindex="-1">
                                    <span class="bx--text-truncate--end">
                  Sign up
                </span>
                                </a>
                            </li>
                            <li role="none">
                                <a class="bx--header__menu-item" href="javascript:void(0)" tabindex="-1">
                                    <span class="bx--text-truncate--end">
                  Log in
                </span>
                                </a>
                            </li>
                            <li role="none">
                                <a class="bx--header__menu-item" href="javascript:void(0)" tabindex="-1">
                                    <span class="bx--text-truncate--end">
                  Dashboard
                </span>
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>
                </li>
                </ul>
            </nav>
            <div class="bx--header__global">
                <button class="bx--header__menu-trigger bx--header__action" aria-label="Action 1" title="Action 1" data-navigation-menu-panel-label-expand="Action 1" data-navigation-menu-panel-label-collapse="Close menu" data-product-switcher-target="#switcher-bqavcareoq">
                <svg width="20" height="20" id="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><defs><style>.cls-1{fill:none;}</style></defs><title>user</title><path d="M16,4a5,5,0,1,1-5,5,5,5,0,0,1,5-5m0-2a7,7,0,1,0,7,7A7,7,0,0,0,16,2Z"/><path d="M26,30H24V25a5,5,0,0,0-5-5H13a5,5,0,0,0-5,5v5H6V25a7,7,0,0,1,7-7h6a7,7,0,0,1,7,7Z"/><rect id="_Transparent_Rectangle_" data-name="&lt;Transparent Rectangle&gt;" class="cls-1" width="32" height="32"/></svg>
      </button>
                </button>
            </div>
        </header>
    </section>
    <section>
        <!-- The top header bar, containing menu items -->
        <header class="bx--header" role="banner" aria-label="IBM CarboTrack" data-header>
            <a class="bx--skip-to-content" href="#main-content" tabindex="0">Skip to main content</a>
            <a href="./">
                <button class="bx--header__menu-trigger bx--header__action" aria-label="Open menu" title="Open menu" data-navigation-menu-panel-label-expand="Open menu" data-navigation-menu-panel-label-collapse="Close menu" data-navigation-menu-target="#navigation-menu-m6ibyfeacg">
                <svg id="icon" xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 32 32">
                    <defs>
                      <style>
                        .cls-1 {
                          fill: none;
                        }
                      </style>
                    </defs>
                    <path d="M29,26H23V22a2.002,2.002,0,0,1,2-2h2V18H23V16h4a2.0023,2.0023,0,0,1,2,2v2a2.0023,2.0023,0,0,1-2,2H25v2h4Z" transform="translate(0 0)"/>
                    <path d="M19,22H15a2.0023,2.0023,0,0,1-2-2V10a2.002,2.002,0,0,1,2-2h4a2.002,2.002,0,0,1,2,2V20A2.0023,2.0023,0,0,1,19,22ZM15,10V20h4V10Z" transform="translate(0 0)"/>
                    <path d="M11,22H5a2.0023,2.0023,0,0,1-2-2V10A2.002,2.002,0,0,1,5,8h6v2H5V20h6Z" transform="translate(0 0)"/>
                    <rect id="_Transparent_Rectangle_" data-name="&lt;Transparent Rectangle&gt;" class="cls-1" width="32" height="32"/>
                  </svg>
            </button>
            </a>
            <a class="bx--header__name" href="javascript:void(0)" title="">
                <span class="bx--header__name--prefix">
        Carbo
      </span>Track
            </a>
            <nav class="bx--header__nav" aria-label="CarboTrack" data-header-nav>
                <ul class="bx--header__menu-bar" aria-label="CarboTrack">
                    <li>
                        <a class="bx--header__menu-item" href="tracker.html" tabindex="0">
            Tracker
          </a>
                    </li>
                    <li>
                        <a class="bx--header__menu-item" href="leaderboard.html" tabindex="0">
            Leaderboard
          </a>
                    </li>
                    <li class="bx--header__submenu" data-header-submenu>
                        <a class="bx--header__menu-item bx--header__menu-title" aria-haspopup="true" aria-expanded="true" href="javascript:void(0)" tabindex="0">
            Account
            <svg class="bx--header__menu-arrow" width="12" height="7" aria-hidden="true">
              <path d="M6.002 5.55L11.27 0l.726.685L6.003 7 0 .685.726 0z" />
            </svg>
          </a>
                        <ul class="bx--header__menu" aria-label="L1 link 3">
                            <li role="none">
                                <a class="bx--header__menu-item" href="javascript:void(0)" tabindex="-1">
                                    <span class="bx--text-truncate--end">
                  Sign up
                </span>
                                </a>
                            </li>
                            <li role="none">
                                <a class="bx--header__menu-item" href="javascript:void(0)" tabindex="-1">
                                    <span class="bx--text-truncate--end">
                  Log in
                </span>
                                </a>
                            </li>
                            <li role="none">
                                <a class="bx--header__menu-item" href="javascript:void(0)" tabindex="-1">
                                    <span class="bx--text-truncate--end">
                  Dashboard
                </span>
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>
                </li>
                </ul>
            </nav>
            <div class="bx--header__global">
                <button class="bx--header__menu-trigger bx--header__action" aria-label="Action 1" title="Action 1" data-navigation-menu-panel-label-expand="Action 1" data-navigation-menu-panel-label-collapse="Close menu" data-product-switcher-target="#switcher-bqavcareoq">
                <svg width="20" height="20" id="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><defs><style>.cls-1{fill:none;}</style></defs><title>user</title><path d="M16,4a5,5,0,1,1-5,5,5,5,0,0,1,5-5m0-2a7,7,0,1,0,7,7A7,7,0,0,0,16,2Z"/><path d="M26,30H24V25a5,5,0,0,0-5-5H13a5,5,0,0,0-5,5v5H6V25a7,7,0,0,1,7-7h6a7,7,0,0,1,7,7Z"/><rect id="_Transparent_Rectangle_" data-name="&lt;Transparent Rectangle&gt;" class="cls-1" width="32" height="32"/></svg>
      </button>
                </button>
            </div>
        </header>
    </section>

    <section style="visibility:hidden">
        <p class="leftAllign">Username:
            <p id="username"></p>
        </p>
        <p>Email:
            <p id="email"></p>
        </p>
        <p>Birth year:
            <p id="birth_year"></p>
        </p>
        <p>Gender:
            <p id="gender"></p>
        </p>
        <p>Last date of login:
            <p id="last_login"></p>
        </p>

    </section>

    <h2>
        Your personal carbon footprint over the last 10 days!
    </h2>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>

    <canvas id="myChart" style="width:100%;max-width:800px;margin-left: auto; margin-right: auto; padding-top: 20px;"></canvas>
    <br/>
    <h3 id="streak-h3">Loading streak...</h3>

    <script>
        const today = ~~(Date.now() / (24 * 60 * 60 * 1000));
        try {
            JSON.parse(localStorage.getItem('tracker'));
        } catch {
            localStorage.setItem('tracker', '{}');
        } finally {
            const tracker = JSON.parse(localStorage.getItem('tracker'));
            const streak = tracker[today] ? ~~localStorage.getItem('streak') : 0;
            document.getElementById('streak-h3').innerHTML = `Current streak: ${streak} day${streak === 1 ? '' : 's'}`;
            var xValues = ["9 Days Ago", "8 Days Ago", "7 Days Ago", "6 Days Ago", "5 Days Ago", "4 Days Ago", "3 Days Ago", "2 Days Ago", "Yesterday", "Today"];

            new Chart("myChart", {
                type: "line",
                data: {
                    labels: xValues,
                    datasets: [{
                        data: Array.from({
                            length: 10
                        }).map((_, i) => ~~tracker[today - i]).reverse(),
                        borderColor: "red",
                        fill: false
                    }]
                },
                options: {
                    legend: {
                        display: false
                    }
                }
            });
        }
    </script>




</body>
<script>
    const user_data = {};
    document.getElementById('username').innerHTML == user_data.full_name;
    document.getElementById('email').innerHTML == user_data.email;
    document.getElementById('birth_year').innerHTML == user_data.birth_year;
    document.getElementById('gender').innerHTML == user_data.gender;
</script>

</html>